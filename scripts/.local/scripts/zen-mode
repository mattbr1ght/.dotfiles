#!/bin/bash

STATE_FILE="$HOME/.cache/zen-mode-state"

if [ -z "$1" ]; then
    echo "Usage: zen-mode [1|0|toggle|status]"
    exit 1
fi

case "$1" in
  1)
    echo 1 > "$STATE_FILE"
    systemctl --user start zen-mode.service
    ;;
  0)
    echo 0 > "$STATE_FILE"
    systemctl --user stop zen-mode.service
    ;;
  toggle)
    CURRENT=$(cat "$STATE_FILE" 2>/dev/null || echo 0)
    if [ "$CURRENT" -eq 1 ]; then
      "$0" 0
    else
      "$0" 1
    fi
    ;;
  status)
    cat "$STATE_FILE" 2>/dev/null || echo 0
    ;;
  *)
    echo "Invalid argument: $1"
    exit 1
    ;;
esac
